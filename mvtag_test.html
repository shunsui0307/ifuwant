<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>クイックコール GTMテスト</title>
</head>
<body>

    <h1>クイックコールHTMLタグ テスト</h1>


<script>
// URLパラメータからBASE64エンコードされた電話番号を取得
const urlParams = new URLSearchParams(window.location.search);
const encodedPhoneNumber = urlParams.get('utm_customid');

// エンコードされた電話番号パラメータが存在し、かつ空ではない場合の処理
if (encodedPhoneNumber) {
  try {
    // BASE64文字列をデコード
    // btoa/atobはブラウザ環境で利用可能です
    const decodedPhoneNumber = atob(encodedPhoneNumber);

    // 電話番号として有効そうな形式か、または必要な検証（例:数字とハイフンのみか）を
    // ここで追加するとより安全です。今回はデコード後の文字列がそのまま電話番号として
    // 利用できると仮定します。
    
    // mvtag 関数を呼び出し
    mvtag("quick_call", {
      "phone_number": decodedPhoneNumber,
      "delay": 15
    });
  } catch (e) {
    // BASE64デコードに失敗した場合（不正な文字列など）の処理
    console.error("Failed to decode BASE64 string for phone number:", e);
  }
}
</script>
