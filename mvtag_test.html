<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>クイックコール GTMテスト</title>
</head>
<body>

<script>!function(){var e=document.createElement("script");e.src="https://api.micovoice.com/api/v1/quick_calls/tag",e.async=!0,e.type="text/javascript",document.head.appendChild(e),window.__MV_DATALAYER__=window.__MV_DATALAYER__||[],window.mvtag=function(e,t){__MV_DATALAYER__.push({eventType:e,eventData:t,token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjYW1wYWlnblVpZCI6ImVkY2Y1NDQ1LTFjYmUtNGVmNy04OTIzLWEyYThlMzBjYmEwMSIsImlhdCI6MTc2NTM1NTQ4NH0.J55kS9VBI-pthVLtKyZnbKjNHc2g6okPrqgb9SXOfIY"})}}();</script>
    
<script>
// URLパラメータからBASE64エンコードされた電話番号を取得
var urlParams = new URLSearchParams(window.location.search);
var encodedPhoneNumber = urlParams.get('utm_customid');

// エンコードされた電話番号パラメータが存在し、かつ空ではない場合の処理
if (encodedPhoneNumber) {
  try {
    // BASE64文字列をデコード
    var decodedPhoneNumber = atob(encodedPhoneNumber);
    
    // mvtag 関数を呼び出し
    mvtag("quick_call", {
      "phone_number": decodedPhoneNumber,
      "delay": 15 // サイト遷移してから何秒後にクイックコールをかけるか秒数を指定
    });
  } catch (e) {
    // BASE64デコードに失敗した場合（不正な文字列など）の処理
    console.error("Failed to decode BASE64 string for phone number:", e);
  }
}
</script>
